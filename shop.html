<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOP</title>
    <link rel="stylesheet" href="shop.css">

</head>

<body>
    <form action="">
        <!-- <input type="text" id="search"> -->
        <div id="search-container">
            <select id="gender">
                <!-- <option value="All">All</option> -->
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select>
            <button type="submit">search</button>
        </div>
        <div id="wrapper"></div>
    </form>
    <script>
        let form = document.querySelector('form')
        // let search = document.querySelector('#search')
        let gender = document.querySelector('#gender')
        let button = document.querySelector('button')
        let wrapper = document.querySelector('#wrapper')

        const CloudName = 'da2oqj7qe'
        const malefolder = 'male'
        const femalefolder = 'female'

        form.onsubmit = async (e) => {
            e.preventDefault()

            const data = await fetch('http://localhost:8052/shop', {
                method: "POST",
                headers: {
                    "COntent-Type": "application/json"
                },
                body: JSON.stringify({
                    selectedgender: gender.value
                })
            })
            const result = await data.json()
            console.log(result)

            const imgdata = result.resources


            try {
                showimg()
            } catch (error) {
                console.log('error fetching images :', error)
            }


            function showimg() {
                console.log(imgdata)
                for (let i = 0; i < imgdata.length; i++) {

                    let div = document.createElement('div')
                    div.className = 'products'

                    let image = document.createElement('img')
                    image.src = imgdata[i].url

                    div.append(image)
                    wrapper.append(div)
                }
            }

            // let selectedgender = gender.value
            // div.innerHTML = ''

            // let url;
            // if (selectedgender === 'Male') {
            //     url = `https://res.cloudinary.com/${CloudName}/image/list/male.json`;
            // } else {
            //     url = `https://res.cloudinary.com/${CloudName}/image/list/female.json`;
            // }

            // try {
            //     const response = await fetch(url)
            //     const data = await response.json()

            //     console.log(data)
            //     // data.resources.forEach(image => {
            //     //     const imageUrl = 'https://res.cloudinary.com/${cloudName}/image/upload/${image.public_id}.${image.format}'
            //     //     const img = document.createElement('img')
            //     //     img.src = imageUrl;
            //     //     imag.alt = public - id
            //     //     div.appendChild(img)
            //     // })
            // }
            // catch (error) {
            //     console.error('Error fetching images:', error);
            // }

            // const img = document.createElement('img')
            // img.src = "https://res.cloudinary.com/da2oqj7qe/image/upload/v1709218572/1_tsiwrn.jpg"
            // div.appendChild(img)

            // const data = await fetch('http://localhost:8052/shop', {
            //     method: "POST",
            //     headers: {
            //         "Content-Type": "application/json"
            //     },
            //     body: JSON.stringify({
            //         gender: gender.value 
            //     })
            // })
            // const result = await data.json()
            // console.log(result)


        }



    </script>
</body>

</html>